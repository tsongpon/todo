language: java
jdk:
- oraclejdk8
cache:
  directories:
  - $HOME/.m2
sudo: required
services:
- docker
notifications:
  email:
  - t.songpon@gmail.com
  on_success: always
  on_failure: always
branches:
  only:
  - master
env:
  global:
  - secure: eHhUJDfvwkLjUptaoUIlIz+qF+q6MYPKO02SPJMulRDMH+V0cscsZkblyBSUgsR/ATWT/aX9hNLZDepMo412+YHwOsFFSj8lx/Wk7lZSztPwP1Ha4BIxp3nF0yquUqxzxp05CJSUp7p275OnwBwum3e94nvspb0/EHajDonVb91aBkSVHp4Qw0WcoyOKOPh0a/x+R4uXleooKYmhr89z/4v54AnlE+zvx8RAhP8jJWlShy2Jb/M8tMlEnpz+v1Nur9p1AXUAHul0vwTs37BpiWRsxHJQ674ZFCNuSE2mVIkyJY83xWif4/wIiFyfhyP7RYX8VSN4FYp8Hc96INCVugxZxnT3/mp/LCqXCL8f3XTMwD8Poyu/vp/0XXvwHZqGRY2SAXvPIoVDBSGgD+fX9D6E6Yr+yuQx+kUC4dlfopegwX22Gd4S6dLFYGmGy8W8LkALwiGXCSeKeYiwiJ+P7MbD/Duob9X4kQ+8n/a2DOWe9lP8UYA8tMtC18sUDo5nmrBIKPi8g+bfUgMybpM7u0WARIulYidhiUzljqGIBpaqLq/X7Y3g0IBPkYIofmpQZ61VCrCUIkG6G5ZmoioiR3M7YmeQtSGVgXSpvC+3xtkssGYq+GnqXtjudQH+jVC5I84jU64ln6ZZCJzGstaviXOMPhmXBRbxYfeHGacmQbY=
  - secure: BvyHpk9e8EFO9D4sARlrGTNOppav/+q+w6i3H+eGJoCCeB3KrVCDADTfyfJK/hB7IZal197MvxdhLLNgzBHu7L6TnzM7SwwK433JCmyd7rbJuc0BwcWQ8C/xxqNZGCq5edPfvQ8stHOT+wCrzMadi2hDcHCpCYdpWUvDUmd0PZAusue1RbowBi9GkYUr6ApprtsWvYSAreJHXM1UxqbuixQKnq+S5whkkufZFcxm263Z/6qplf+ah4dGsR/cC+1sjypP5MzV9lDYpLZDiCY1Yx0eKr9/5nlkkg/fWDdhhR7dTZ/lXbzDFQD7MVTrM8vxV9sj/vCpj5A0s30Ua658q067479NhqzStPoO5oVmS7DoAl6MXw3VKH+kJRcvz7+TniltiqPU5vIRFWtKyxyq4EinroMdxH7rPYmGnZ4ygsn5vK6g2cjyps3L3u6lyEyaLC/tnHdMkRfGpF9yv5F3BaM6FGyAzFwP8B4mOjVRkMzYxMnNZgde/utp2AlsyIQx6c70s1+gDkr/I1IAxy+6eKwDWqGJartwVp57tFji6lyo3ASrooUZkgET8n5gkjMRXnVDCeo68pAbo7XEVFwyuhrwgpErpfM4YQNxbkBTMae3wIbwXPKdJwwWvHrWL60BoFQ8EBHSsNoaUta+PNh69zEBlhXqJ7Td4Wh5rQGt2E8=
  - secure: ApSGJD3hKHol+r1v127fEa3Qp5x0JjOuNBvV4S6CRGbqTCTg2xfYWc28xM7XhunfI+EqcvChDv+Tfq283NSk1Ae1y/lqBj9TtE1mhgTycsHjL0J8NkzfQgPBWi/Ep/uw3tBrMXNqmqMWGbzXz6O5qLxBFyhJqq/xG377kiCYDlRnVpqG/J7fA05cicd7m41p3usyyC3uusAdl4UQN1KJxth2XlozRCAd08r0n6nY5UqbsBRd96rD9AzlJh6BpCeGijPLW2QmPYBCtVmN7XBHbqMxWZfV5XpUDmPzPeM4OT8UUBioHoC9HKlY7Y5znRmxRJyUJU9iAYbYwxM646bydoYUmaNQNDCot7PIIbSLAruEYdlV4rWSc8P6rh/SB/sKZMkoBbPgsKhLRl4PCtoNnWYCu6voo72Y8WSDCa/2j9O7xodURiy2CSQYqtOFbp/3v3UlXh5hdXd6pG4ZhAunkuVp1uxQFMoQu8dl6AjIrpBTEvno4IfB3aJhXcYpKaWPA4NINrFonIu8+K+kw6hJZNjwZEfzUYr5iAMIqN3vf1yk5cwoNTCfGCuuJeurA+HpWX/Au0bmY8KS8wWDq9fH60ML4gQcCT7wXMUw1qGGZS5R1i3QXo/9WOU/IcQCdjOWKsA2Lv9DeQ89MDlDaTdBobgtjfZwtsDWg+IthSoSQ/I=
  - secure: oiIXrHdjWsi9PXeOBOfG51Qgxu+lQNEbeCW8wBRnTRn0bNXOcaGAfWfI9tJawVg9C6JHpgnVxAketUzJzH5S42tsmNM/g0zYTJDn+IDDlB/bKSIDTIm/BOrfM7YVlRm9TpkzSOkSvOOdOdqUPWM4NmP8Dye+9a55+wbP5KTbcBmxJ5reiV44oel21iqmoHPRinHylv3+QHRPNIXMW/BH56R+DMiRc6m/MosmxJ8J58FXt7x0FrQuk5IXBtWHuxob0MKj81kN3G+lsA5Sf3Alqnw1wIb/eUOpkB1WcF+p5foBx+ymjV8LIoT5LAjcdPHrUWa6koFzZIjFb38PlXqz5f3kAtgWEmU2L5SHJPTPf/kPBz6s2JUsbM5cL9YNErfrvGXi24m54013U0a0I7Emc58QUei6KvJwvv82gaxu1GoYKsFXw8uSnPq5ed7f5/OPf3VIGstwuA7d5siBFofv9n7P3Px2f6TdhT7lc9zO4FHl4ekLEY1rctJeshqYNuLj0tRiPNxdR9Y4k5xAjPul9HGqnF5AqJNs2Ho2J8FKvlX3U1AFAu+EiPycL/8nM7ZfFNHiqjy3v2wk3MSwuYkMonuEcsvO51cmsOo2egevT6Pw2QcKBdiYlakKzIGB5BoGdB2Rs6GmZhLm9+hb3Q23e4Hl7fcqy8kL8Hsep1Er+PI=
  - secure: kDu8C0W+ysTZMO/MT5dyQirQXXHxUS+vAgxpW0dJrI4KGLDwv8Y6E4xyRkceO4GvCgJIvDiL4HAKHQgRu314sAxwdCr2lFh5pbHLQiAljACkzg4ExmNUJxi5Uyraa/qv7IlPSlinhSbJDlbf0Nc4BUrGWqRSBGl8/WSKaH9O+NHxxExAQPgSbAjI1gNvQdKo+OVjQ1cHq5cpih0oInv1/ke1IzhGPvHI74HYOlqDvBXxkAj2LgdnBxdXKKvImJW1ZfQzcQgdrJf3ecLOwNxAMopSLC9kpraQLu7Omm/ATfgXifUR4l79WiOGlPbUhEx2C433+EsBfBvvVALGWh0W7DdybQHIzVWYyLKD2h9eQvhvxU3LRKT5jevPqdAnz8AnePXfkLALXIEbTnAYZKs5lxlaGOP8Hv7qd3ONaqfWJbBxjNZunArsahFbv1wHHCD7auEzM8bkQ36LDFEl3EJZDYP4S9lg1YkCB9Wqly7xGQb0aF7HT4EOKT0th3ZwpbHGF7UImANBU7AYKIiTgNwZabJ5ujkPQhYn+b4ylHTewJUX6aSpx19GVqdjxnaQ8GI1DcHdPcR7icnN0nmoGfK8UaeU9a/ARryBbiwcpSMEGtWSaNUNWslL2KeRXzjRPX227zKLdwuMR116WXtplP9fO4HDqRFuprpqnrZK7N/Pyww=
  - secure: Q6WmHxRGaBAY+ZQY6/QZyxCEgsTkjq4WDPn/qo4WUe9elnA6kfAbuIYtmW7M3ZiSItlKfsqgQUOCS0ktHKEaNUq15ph+bV+Lc8wzY5u8EalJDVgQp5fPnN4XYIntWZxvNFGFwoTuDX0jf1pJd8f8GkrIyuGhwQJy0zBZtO74G5kMf7ERB10yNgINt8+p9xi72LNaWj/MTc0qFTwkYszW2MutiMv31hp3XJwrsooCADIy1kXJ3adZtksagy92P8w6NZWZtcmV8SuPRAHb5obU6eTQdeINFca8okr0FVy+zFlNZh5hiZTuKuzj6cTsw72F8VIYjkdm6D3I09vMWrDMfVw+zhJ0qOk+5F40hwYPYHuI4RtlGz8BViLhrL/J19r8Jl/Zmn9/uo1/NwZVGodQGuVHunqcICKCH2q2wsz2rLVPI8n+bUK12bM5VNGHpXRnaLANvW+udpJ0pvWPWPAPOSLVORSmBgyrCPsUIxzS8rg7repPw8wWTXXmRYslJDAk1iFi9pbuP7wqb+SrIgZnkBecye0AZULQpmN6LU8+1GhK4lex722SH/9I5OATfLlBKQ2/PIjr779tofHt5IwYT16lToFPzH2TwaS/JN8pQvlsAoGablDU/P4u/1toOr14zcRztC40NbdaqNrVBGNesfwqknZztyMVQrraTCV6fz0=
  - secure: W5a3qyJVt/Wk1bEXB98b1CSZwXtqqtDSBUWDi2JrhwJM644lFOxsSnC8FAxOJXByh9jfq7JwufDSAhbJY86nl+6+Q3HOpAD1nzFT0ijeJyFwqFrDn3IOaz9xgcdM1GDKoqvxkycEiZhmT3Siif+ry/93YqSyOih0zlqDwuibuPWqGzvBPnSiBPySEPO9rTK/yxnDxvGAB1wlT8Apg21Li9SVs4j6nwb0znVVwgfa80sWV0hp3y6sYypeDtJ5SLm5cTKpuGTYGlkI2/f4vsNpEBJNGMDF5E+GSskP5sOyZv+jrt/ggvEbwfJqh7lZFAKuwr3bleRbLQwU6yXVMYgdnIGgKpDwknAIP0teoPA0SQxz0YuelSRBLBAzr9t5P0OR2TbGWe9mzIoxEm6p6mEUL3V78CuYo7V4DiNdCGPFB5Qhv0QLhnRHTrCG7/BvbQZsodTLjbbGWU9jL30szSmVSon3AHm/WGrJESoJToF7FEylnFA9+MJuyOV1UpBYjdBu/630HzS9ciOch3Ne1E2XG0WTsDY1fR6/iyxKw7HWC7Vk8Mh5NDz/p/rEUexDBOysmvlpOuE2cuGWoqqEAg0QZqu9i+vAH6NtgZuYJoZe9a1ETMw7D8osswRSu1prryasd6JR8hIAuxeJRV93+mlLSQYX5GloBM/X0FGyr8mP90I=
before_install:
- gem install travis -v 1.8.5 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=todo-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
- export CONTAINER_IP=13.229.97.65
- export PLATFORM_TEST_NAME="todo-platform-tests"
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_services.sh
- sh travis_scripts/deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
